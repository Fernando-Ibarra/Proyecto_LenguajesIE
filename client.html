<html>

<head>
    <title>Client</title>
</head>

<body>
    <img src="">
    <button id="btnAlimentar">Alimentar</button>
    <script>
        const img = document.querySelector('img');
        const btnAlimentar = document.querySelector('#btnAlimentar');

        // Servidor de Google Cloud
        // const WS_URL = 'ws:///34.125.169.64:65080';

        // Para local -> revisar con ipconfig
        const WS_URL = 'ws:///192.168.1.2:65080';

        const ws = new WebSocket(WS_URL);
        let urlObject;
        ws.onopen = () => console.log(`Connected to ${WS_URL}`);
        ws.onmessage = message => {

            console.log('info recibida' + message);

            const arrayBuffer = message.data;
            if (urlObject) {
                URL.revokeObjectURL(urlObject);
            }
            urlObject = URL.createObjectURL(new Blob([arrayBuffer]));
            img.src = urlObject;
        }

        btnAlimentar.addEventListener('click', () => {
            console.log('Boton en cliente presionado');
            ws.send("1")

        })

    </script>
</body>

</html>